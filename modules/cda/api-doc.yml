paths:
  /modules/cda/create:
    post:
      tags:
        - "cda"
      description: Generador de CDA
      summary: Generador de CDA
      security:
        - JWT: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: id
          in: body
          description: Identificador único de la prestación
          required: true
          type: string
          example: "1"
        - name: tipoPrestacion
          in: body
          description: Tipo de prestación (código Snomed)
          required: true
          type: string
          example: "308251003"
        - name: fecha
          in: body
          description: Fecha de la prestación
          required: true
          type: string
          format: date-time
          example: "2017-10-10 12:12:12"
        - name: texto
          in: body
          description: Resumen de la prestación
          required: true
          type: string
          example: "prueba"
        - name: cie10
          in: body
          description: Código CIE10 de la prestación
          required: false
          type: string
        - name: paciente
          in: body
          description: Datos requeridos del paciente
          required: true
          schema:
            $ref: '#/definitions/Paciente'
        - name: profesional
          in: body
          description: Datos requeridos del profesional
          required: true
          schema:
            $ref: '#/definitions/Profesional'
        - name: file
          in: body
          description: Archivo adjunto en Base64
          required: false
          example: 'data:application/pdf;base64,AEFCSADE2D2D2..'
      responses:
        '200':
          description: Devuelve un json con el ID del CDA generado, y el ID del paciente 
          schema:
            $ref: "#/definitions/CdaResponse"
        '401':
          description: Autorización invalida.
  /modules/cda/:
    post:
      tags:
        - "cda"
      description: Almacena un CDA de una organización externa.
      summary: Almacena un CDA de una organización externa.
      security:
        - JWT: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: cda
          in: body
          description: Archivo XML en Base64
          required: true
          type: string
          example: 'data:application/xml;base64,AEFCSADE2D2D2...'
        - name: adjunto
          in: body
          description: Archivo adjunto en Base64
          required: false
          type: string
          example: 'data:application/pdf;base64,AEFCSADE2D2D2...'
      responses:
        '200':
          description: Devuelve ID del CDA generado 
          schema:
            $ref: "#/definitions/CdaResponse"
  /modules/cda/style/cda.xsl:
    get:
      tags:
        - "cda"
      description: Devuelve el archivo de estilo para renderizar HTML desde el browser.
      summary: Devuelve el archivo de estilo para renderizar HTML desde el browser.
      security:
        - JWT: []
      consumes:
        - application/json
      produces:
        - application/xsl
      responses:
        '200':
          description: Devuelve el archivo de estilo para renderizar HTML desde el browser.
        '401':
          description: No Autenticado
        '403':
          description: El token de acceso no tiene el alcance requerido    
  /modules/cda/files/{fileName}:
    get:
      tags:
        - "cda"
      description: Devuelve los archivos almacenados por los CDAs. ** VER
      summary: Devuelve los archivos almacenados por los CDAs.
      security:
        - JWT: []
      consumes:
        - application/json
      parameters:
        - name: fileName
          in: path
          description: archivo adjunto del cda, ejemplo "5b509201a5ba891f65d23a62.pdf"
          required: true
          type: string
      responses:
        '200':
          description:  Devuelve los archivos almacenados por los CDAs
        '401':
          description: No Autenticado
        '403':
          description: El token de acceso no tiene el alcance requerido 
  /modules/cda/paciente/:
    get:
      tags:
        - "cda"
      description:  Devuelve un listado con los CDA de un paciente validado dado su documento y sexo (solo los xml). Ejemplo .../cda/paciente?documento=12345678&sexo=femenino
      summary: Devuelve un listado con los CDA de un paciente validado dado su documento y sexo (solo los xml)
      security:
        - JWT: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: documento
          in: query
          description: documento del paciente.
          required: true
          type: string
        - name: sexo
          in: query
          description: sexo del paciente. Los formatos permitidos son 'femenino', 'masculino', 'otro'
          required: true
          type: string
      responses:
        '200':
          description: Devuelve un listado con los CDA de un paciente
        '401':
          description: No Autenticado
        '403':
          description: El token de acceso no tiene el alcance requerido 
  /modules/cda/paciente/{id}:
    get:
      tags:
        - "cda"
      description:  Devuelve un listado con los CDA de un paciente dado su ID (solo los xml)
      summary: Devuelve un listado con los CDA de un paciente (solo los xml)
      security:
        - JWT: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: id
          in: path
          description: Identificación del paciente
          required: true
          type: string
      responses:
        '200':
          description: Devuelve un listado con los CDA de un paciente
        '401':
          description: No Autenticado
        '403':
          description: El token de acceso no tiene el alcance requerido 
  /modules/cda/{id}:
    get:
      tags:
        - "cda"
      description: Consulta un cda de acuerdo a su id.
      summary: Consulta un cda de acuerdo a su id.
      security:
        - JWT: []
      consumes:
        - application/json
      produces:
        - application/xml
      parameters:
        - name: id
          in: path
          description: Identificación del CDA
          required: true
          type: string
      responses:
        '200':
          description: Devuelve el xml del CDA
        '401':
          description: No Autenticado
        '403':
          description: El token de acceso no tiene el alcance requerido 
  /modules/cda/tojson/{id}:
    get:
      tags:
        - "cda"
      description:  Devuelve el CDA parseado a json según un ID
      summary: Devuelve el CDA parseado a json según un ID.
      security:
        - JWT: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: id
          in: path
          description: Identificación del CDA
          required: true
          type: string
      responses:
        '200':
          description: Devuelve el json del CDA 
        '401':
          description: No Autenticado
        '403':
          description: El token de acceso no tiene el alcance requerido 
  /modules/cda/{id}/{fileName}:
    get:
      tags:
        - "cda"
      description: Devuelve el archivo adjunto del cda.
      summary: Devuelve el archivo adjunto del cda.
      security:
        - JWT: []
      consumes:
        - application/json
      parameters:
        - name: id
          in: path
          description: identificación del cda
          required: true
          type: string
        - name: fileName
          in: path
          description: archivo adjunto del cda
          required: true
          type: string
      responses:
        '200':
          description: Devuelve el archivo adjunto del cda
        '401':
          description: No Autenticado
        '403':
          description: El token de acceso no tiene el alcance requerido      
   