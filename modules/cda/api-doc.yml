paths:
  /modules/cda/create:
    post:
      tags:
        - "cda"
      description: Generador de CDA
      summary: Generador de CDA
      security:
        - JWT: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: id
          in: body
          description: Identificador único de la prestación
          required: true
          type: string
          example: "1"
        - name: tipoPrestacion
          in: body
          description: Tipo de prestación (código Snomed)
          required: true
          type: string
          example: "308251003"
        - name: fecha
          in: body
          description: Fecha de la prestación
          required: true
          type: string
          format: date-time
          example: "2017-10-10 12:12:12"
        - name: texto
          in: body
          description: Resumen de la prestación
          required: true
          type: string
          example: "prueba"
        - name: cie10
          in: body
          description: Código CIE10 de la prestación
          required: false
          type: string
        - name: paciente
          in: body
          description: Datos requeridos del paciente
          required: true
          schema:
            $ref: '#/definitions/Paciente'
        - name: profesional
          in: body
          description: Datos requeridos del profesional
          required: true
          schema:
            $ref: '#/definitions/Profesional'
        - name: file
          in: body
          description: Archivo adjunto en Base64
          required: false
          example: 'data:application/pdf;base64,AEFCSADE2D2D2..'
      responses:
        '200':
          description: Devuelve un json con el ID del CDA generado, y el ID del paciente 
          schema:
            $ref: "#/definitions/CdaResponse"
  /modules/cda/{id}:
    get:
      tags:
        - "cda"
      description: Consulta un cda de acuerdo a su id.
      summary: Consulta un cda de acuerdo a su id.
      security:
        - JWT: []
      consumes:
        - application/json
      produces:
        - application/xml
      parameters:
        - name: id
          in: path
          description: Identificación del CDA
          required: true
          type: string
      responses:
        '200':
          description: Devuelve el xml del CDA  
  /modules/cda/{id}/{fileName}:
    get:
      tags:
        - "cda"
      description: Devuelve el archivo adjunto del cda.
      summary: Devuelve el archivo adjunto del cda.
      security:
        - JWT: []
      consumes:
        - application/json
      parameters:
        - name: id
          in: path
          description: identificación del cda
          required: true
          type: string
        - name: fileName
          in: path
          description: archivo adjunto del cda
          required: true
          type: string
      responses:
        '200':
          description: Devuelve el archivo adjunto del cda     
  /modules/cda/:
    post:
      tags:
        - "cda"
      description: Almacena un CDA de una organización externa.
      summary: Almacena un CDA de una organización externa.
      security:
        - JWT: []
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: cda
          in: body
          description: Archivo XML en Base64
          required: true
          type: string
          example: 'data:application/xml;base64,AEFCSADE2D2D2...'
        - name: adjunto
          in: body
          description: Archivo adjunto en Base64
          required: false
          type: string
          example: 'data:application/pdf;base64,AEFCSADE2D2D2...'
      responses:
        '200':
          description: Devuelve ID del CDA generado 
          schema:
            $ref: "#/definitions/CdaResponse"