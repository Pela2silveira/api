import * as express from 'express';
import * as test from '../tests/facturacionTest';

let router = express.Router();

router.get('/facturar/paciente/:id/:objectId?', async function (req, res, next) {
    try {
        let result = await test.testearMapeoPaciente(req.params.id, req.params.objectId);
        res.json(result);
        //test.testearMapeoPaciente(req.params.id).then((result) => {console.log('FARAFA'); res.json(result.recordsets[0])});
    } catch (err) {
        return next(err);
    }
});

router.get('/facturar/efector/:id', async function (req, res, next) {
    try {
        let result = await test.testearMapeoEfector(req.params.id);
        res.json(result);
    } catch (err) {
        return next(err);
    }
});

router.get('/facturar/servicio/:id', async function (req, res, next) {
    try {
        let result = await test.testearMapeoServicio(req.params.id);
        res.json(result);
    } catch (err) {
        return next(err);
    }
});

router.get('/facturar/profesional/:id/:objectId?', async function (req, res, next) {
    try {
        let oid = req.params.objectId ? req.params.objectId : '0';
        let result = await test.testearMapeoProfesional(req.params.id, oid);
        res.json(result);
    } catch (err) {
        return next(err);
    }
});

router.get('/facturar/tipopractica/:id', async function (req, res, next) {
    try {
        let result = await test.testearMapeoTipoPractica(req.params.id);
        res.json(result);
    } catch (err) {
        return next(err);
    }
});

router.get('/facturar/obrasocial/:id', async function (req, res, next) {
    try {
        let result = await test.testearMapeoObraSocial(req.params.id);
        res.json(result);
    } catch (err) {
        return next(err);
    }
});

router.get('/facturar/diagnostico/:id', async function (req, res, next) {
    try {
        let result = await test.testearMapeoDiagnostico(req.params.id);
        res.json(result);
    } catch (err) {
        return next(err);
    }
});

export = router;
